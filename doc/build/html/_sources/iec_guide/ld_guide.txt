Общие сведения о языке LD
=========================

.. contents:: Содержание

**LD (Ladder Diagram)** – графический язык, основанный на принципах
релейно-контактных схем (элементами релейно-контактной логики являются:
контакты, обмотки реле, вертикальные и горизонтальные перемычки и др.) с
возможностью использования большого количества различных функциональных
блоков. Достоинствами языка LD являются: представление программы в виде
электрического потока (близко специалистам по электротехнике), наличие
простых правил, использование только булевых выражений. На рис. 6.1
приведён пример программы на языке LD (слева) и ее эквивалент в виде
электрической цепи с реле и выключателями (справа).

|image333|

Рис. 6.1 – Программа на языке LD (слева) и ее эквивалент в виде
электрической (справа)

Схемы, реализованные на данном языке, называются многоступенчатыми. Они
представляют собой набор горизонтальных цепей, напоминающих ступеньки
лестницы, соединяющих вертикальные шины питания.

Объекты языка программирования LD обеспечивают средства для
структурирования программного модуля в некоторое количество контактов,
катушек. Эти объекты взаимосвязаны через фактические параметры или
связи.

Порядок обработки индивидуальных объектов в LD-секции определяется
потоком данных внутри секции. Ступени, подключенные к левой шине
питания, обрабатываются сверху вниз (соединение к левой шине питания).
Ступени внутри секции, которые не зависят друг от друга, обрабатываются
в порядке размещения.

Основные конструкции языка

Слева и справа схема на языке LD ограничена вертикальными линиями –
шинами питания. Между ними расположены цепи, образованные контактами и
катушками реле, по аналогии с обычными электронными цепями. Слева любая
цепь начинается набором контактов, которые посылают слева направо
состояние «ON» или «OFF», соответствующие логическим значениям TRUE или
FALSE. Каждому контакту соответствует логическая переменная (типа BOOL).
Если переменная имеет значение TRUE, то состояние передается через
контакт. Иначе – правое соединение получает значение выключено ("OFF").

Контакты могут быть соединены параллельно, тогда соединение передает
состояние «логическое ИЛИ». Если контакты соединены последовательно, то
соединение передаёт «логическое И».

Контакт может быть инвертируемым. Такой контакт обозначается с помощью
символа \|/\| и передает состояние "ON", если значение переменной FALSE.

Язык LD позволяет:

-  выполнять последовательное соединение контактов;

-  выполнять параллельное соединение контактов;

-  применять нормально разомкнутые или замкнутые контакты;

-  использовать переключаемые контакты;

-  записывать комментарии;

-  включать Set/Reset-выходы (Установка/Сброс);

-  переходы;

-  включать в диаграмму функциональные блоки;

-  управлять работой блоков по входам EN.

Контакт

Контактом является LD-элемент, который передаёт состояние горизонтальной
связи левой стороны горизонтальной связи на правой стороне. Это
состояние – результат булевой AND-операции состояния горизонтальной
связи с левой стороны с состоянием ассоциированной переменной или
прямого адреса. Контакт не изменяет значения связанной переменой или
прямого адреса.

Для нормальных контактов (см. рис. 6.2) состояние левой связи передается
в правую связь, если состояние связанного логического фактического
параметра TRUE. Иначе, состояние правой связи FALSE.

|image334|

Рис. 6.2 – Нормальный контакт

Для инверсных контактов (см. рис. 6.3) состояние левой связи передается
в правую связь, если состояние связанного логического фактического
параметра FALSE. Иначе, состояние правой связи TRUE.

|image335|

Рис. 6.3 – Инверсный контакт

В контактах для обнаружения нарастания фронта (см. рис 6.4) правая связь
устанавливается в состояние TRUE, если переход связанного фактического
параметра происходит из FALSE в TRUE, и в то же время состояние левой
связи TRUE. Иначе, состояние правой связи FALSE.

|image336|

Рис. 6.4 – Контакт для обнаружения нарастания фронта

В контактах для обнаружения спада фронта (см. рис. 6.5) правая связь
устанавливается в состояние TRUE, если переход связанного фактического
параметра происходит из True в False, и состояние левой связи True в то
же время. Иначе, состояние правой связи FALSE.

|image337|

Рис. 6.5 – Контакт для обнаружения спада фронта

Катушка

Катушка является LD-элементом, который передаёт состояние горизонтальной
связи на левой стороне неизменяемым горизонтальной связи на правой
стороне. В этом процессе состояние связанной переменной или прямого
адреса будет сохранено.

В нормальных катушках (см. рис. 6.6) состояние левой связи передается в
связанный логический фактический параметр и в правую связь.

|image338|

Рис. 6.6 – Нормальная катушка

В инвертирующей катушке (см. рис. 6.7) состояние левой связи копируется
в правую связь. Инвертированное состояние левой связи копируется в
связанный логический фактический параметр. Если связь находится в
состоянии FALSE, тогда правая связь тоже будет находиться в состоянии
FALSE, и связанный логический фактический параметр будет находиться в
состоянии TRUE.

|image339|

Рис. 6.7 – Инвертирующая катушка

В катушке установки (см. рис. 6.8) состояние левой связи копируется в
правую связь. Связанный логический фактический параметр устанавливается
в состояние TRUE, если левая связь имеет состояние TRUE, иначе он не
изменяется. Связанный логический фактический параметр может сбрасываться
только катушкой сброса.

|image340|

Рис. 6.8 – Катушка установки

В катушке сброса (см. рис. 6.9) состояние левой связи копируется в
правую связь. Связанный логический фактический параметр устанавливается
в состояние FALSE, если левая связь имеет состояние TRUE, иначе он не
изменяется. Связанный логический фактический параметр может
устанавливаться только катушкой установки.

|image341|

Рис. 6.9 – Катушка сброса

В катушке обнаружения нарастания фронта (см. рис. 6.10) состояние левой
связи копируется в правую связь. Связанный фактический параметр типа
данных BOOL будет установлен в состояние TRUE для цикла программы, если
произошел переход левой связи из FALSE в TRUE.

|image342|

Рис. 6.10 – Катушка обнаружения нарастания фронта

В катушке обнаружения спада фронта (см. рис. 6.11) состояние левой связи
копируется в правую связь. Связанный фактический параметр типа данных
BOOL будет установлен в состояние TRUE для цикла программы, если
произошел переход левой связи из TRUE в FALSE.

|image343|

Рис. 6.11 – Катушка обнаружения спада фронта

Слово «катушка» имеет обобщенный образ исполнительного устройства,
поэтому в русскоязычной документации обычно говорят о выходе цепочки,
хотя можно встретить и частные значения термина, например катушка реле.

Шина питания

Левая шина питания соответствует единичному сигналу. Ступени,
подключённые к левой шине питания, обрабатываются сверху вниз
(соединение к левой шине питания).

Пример программы на языке LD

Пример представляет собой реализацию логического выражения:

C = A AND NOT B

При создании LD диаграмм можно использовать только переменные типа BOOL.
Добавим новый контакт и привяжем его к имени A (имени переменной). Далее
добавляется шина питания слева, шина питания справа, нормальный контакт,
инверсный контакт и нормальная катушка. Нормальный контакт ассоциируется
с переменной A, инверсный контакт с переменой B, нормальная катушка с
переменной C. Далее это всё последовательно соединяется (см. рис. 6.12),
и результатом является программа, написанная на языке LD, реализующая
логическое выражение:

C = A AND NOT B

|image344|

Рис. 6.12 – Пример LD диаграммы, реализующей логическое выражение C = A
AND NOT B

.. |image333| image:: ./media/ld/image340.jpeg
   :width: 6.13472in
   :height: 2.24097in
.. |image334| image:: ./media/ld/image341.png
   :width: 1.32292in
   :height: 0.72917in
.. |image335| image:: ./media/ld/image342.png
   :width: 1.41667in
   :height: 0.75000in
.. |image336| image:: ./media/ld/image343.png
   :width: 1.63542in
   :height: 0.62500in
.. |image337| image:: ./media/ld/image344.png
   :width: 1.72917in
   :height: 0.75000in
.. |image338| image:: ./media/ld/image345.png
   :width: 1.76042in
   :height: 0.75000in
.. |image339| image:: ./media/ld/image346.png
   :width: 1.70833in
   :height: 0.69792in
.. |image340| image:: ./media/ld/image347.png
   :width: 1.71875in
   :height: 0.77083in
.. |image341| image:: ./media/ld/image348.png
   :width: 1.63542in
   :height: 0.75000in
.. |image342| image:: ./media/ld/image349.png
   :width: 1.65625in
   :height: 0.69792in
.. |image343| image:: ./media/ld/image350.png
   :width: 1.65625in
   :height: 0.65625in
.. |image344| image:: ./media/ld/image351.png
   :width: 3.10486in
   :height: 0.75000in
